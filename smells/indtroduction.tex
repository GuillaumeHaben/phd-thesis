\section{Introduction}

% Talk about what is a smell, why we care about them in evolution and define the effects they can have. Make a link with the large number of refactoring we observed in the previous chapter.

Looking back at Chapter~\ref{chap:evolution-system-user-interactive-test} we observe a large number of changes in the structure of KDT depicted in Figure~\ref{fig:changes_steps}. These changes are explained by the fact that many \emph{Keywords} are refactored during the evolution of the test suite. Following the definition present in the literature, refactoring is a technique to improve the design of a system and enable its evolution \cite{Fowler1999}. Thus, in an effort to better understand the reasons leading to refactoring, we analyze the nature and diffusion of such sub-optimal designs in the test code leading to these iso-functional changes. As such, we rely on the concept of smell, which was first introduced by \textcite{Fowler1999}, to define a  poor design and implementation choice that hinder the system maintainability. Where a lot of work has been devoted to their analysis in production code, more recently, the research community started to focus on the bad practices present in the test code \cite{VanDeursen2001, Meszaros2007, Reichhart2007, VanRompaey2007, Chen2012, Hauptmann2013, Bavota2015, Tufano2016, Bowes2017, Kim2020, Peruma2020} and coined the term test smells to specifically refer to bad practices occurring in test code.

In this chapter, we focus our attention to those test smells present in SUITs that we will refer to as SUIT smells. Indeed, the interviews conducted in Chapter~\ref{chap:evolution-system-user-interactive-test} and the analysis of the impact of sub-optimal decision such as the presence of clones in the test suite (Section~\ref{sec:evolution-results-rq4}) highlight the importance of better understanding how improving the quality of the code by avoiding  anti-patterns can reduce the heavy maintenance cost of KDT tests.

More generally, where the literature explore extensively the question of bad practices and their refactoring in unit tests \cite{VanDeursen2001, Meszaros2007, Reichhart2007, VanRompaey2007, Bavota2015, Tufano2016, Bowes2017, Kim2020, Peruma2020}, fewer studies \cite{Chen2012, Hauptmann2013} target specifically the the question at the system level. Nevertheless, SUITs present peculiarities in the way they interact with the SUT through its GUI, their black box nature, or the way they are written to be understood not only by testers and developers but by business analysts as well. 

Thus, in an effort to shed light on SUIT smells, we combine a multi-vocal literature review and an empirical study on the KDT test suites from BGL BNP Paribas as well as the ones present in 12 open-source repositories. Using this catalog of SUIT smells, we propose an automated approach for detecting their diffusion and refactoring.

